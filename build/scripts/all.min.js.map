{"version":3,"sources":["app.module.js","app.config.js","directives/fade.js","directives/spotifyPlay.js","home/home.js","login/login.js","playlist/playlist.js","services/spotify.service.js","services/youtube.service.js","templates.js"],"names":["angular","module","config","$routeProvider","$httpProvider","spotifyInterceptor","$window","$injector","request","url","indexOf","headers","Authorization","localStorage","getItem","responseError","response","status","spotify","get","logout","when","templateUrl","controller","controllerAs","otherwise","$inject","interceptors","push","app","cwFade","link","scope","element","isVisible","windowBottom","$","window","scrollTop","height","elementBottom","offset","top","scroll","removeClass","addClass","directive","cwSpotifyPlay","$sce","restrict","song","trustAsResourceUrl","uri","homeController","vm","this","user","playlists","getPlaylists","then","data","loginController","$location","login","location","absUrl","replace","search","access_token","setToken","playlistController","youtube","$routeParams","title","playlistId","ownerId","getPlaylist","playlist","forEach","tracks","items","item","getVideo","track","name","video","$http","service","id","display_name","setItem","JSON","stringify","removeItem","path","token","getSong","parse","factory","snippet","channelTitle","toLowerCase","videoId","thumbnail","thumbnails","run","$templateCache","put"],"mappings":"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","file":"all.min.js","sourcesContent":["/**\n * Created by Colin.Watson on 4/13/2015.\n */\n(function(){\n\tangular.module('app', [\n\t\t'ngRoute',\n        'ngSanitize'\n\t]);\n})();","(function(){\n\n\tvar app = angular.module('app');\n\n\tapp.config(config);\n\tconfig.$inject = ['$routeProvider', '$httpProvider'];\n\tfunction config($routeProvider, $httpProvider) {\n\t\t$routeProvider\n            .when('/home', {\n                templateUrl: 'app/home/home.html',\n                controller: 'homeController',\n                controllerAs: 'vm'\n            })\n            .when('/playlist/:ownerId/:playlistId', {\n                templateUrl: 'app/playlist/playlist.html',\n                controller: 'playlistController',\n                controllerAs: 'vm'\n\t\t    })\n            .when('/', {\n                templateUrl: 'app/login/login.html',\n                controller: 'loginController',\n                controllerAs: 'vm'\n            })\n            .when('/:access_token', {\n                templateUrl: 'app/login/login.html',\n                controller: 'loginController',\n                controllerAs: 'vm'\n            }).otherwise('/');\n\n        spotifyInterceptor.$inject = ['$window', '$injector'];\n        function spotifyInterceptor($window, $injector){\n            return {\n                'request': function(config) {\n                    if(config.url.indexOf('api.spotify') > -1){\n                        config.headers.Authorization = 'Bearer ' + $window.localStorage.getItem('authToken');\n                    }\n                    return config;\n                },\n\n                'responseError': function(response) {\n                    if (response.status == '401' && response.config.url.indexOf('api.spotify') > -1) {\n                        var spotify = $injector.get('spotify');\n                        spotify.logout();\n                    }\n\n                    return response;\n                }\n            };\n        }\n\n        $httpProvider.interceptors.push(spotifyInterceptor)\n\n\t}\n\n\n})();","/**\r\n * Created by colin on 4/15/15.\r\n */\r\n(function(){\r\n\r\n    angular.module('app').directive('cwFade', cwFade);\r\n\r\n    cwFade.$inject = [];\r\n\r\n    function cwFade(){\r\n        return {\r\n                link:link\r\n            };\r\n\r\n\r\n        function link(scope, element){\r\n\r\n            $(window).scroll(function(){\r\n                   if(isVisible(element)){\r\n                        element.removeClass('partial');\r\n                    }\r\n                    else{\r\n                        element.addClass('partial');\r\n                    }\r\n            });\r\n\r\n            function isVisible(element)\r\n            {\r\n                var windowBottom = $(window).scrollTop() + $(window).height();\r\n                var elementBottom = $(element).offset().top + $(element).height();\r\n\r\n                return (((elementBottom - ($(element).height() *.5)) <= windowBottom) && ($(element).offset().top >= $(window).scrollTop()));\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n})();","/**\r\n * Created by colin on 4/16/15.\r\n */\r\n(function(){\r\n\r\n    angular.module('app').directive('cwSpotifyPlay', cwSpotifyPlay);\r\n\r\n    cwSpotifyPlay.$inject = ['$sce'];\r\n    function cwSpotifyPlay($sce){\r\n        return {\r\n            restrict:'E',\r\n            templateUrl:'./app/directives/templates/spotifyPlay.html',\r\n            scope:{\r\n                song:'='\r\n            },\r\n            link:function(scope){\r\n                scope.url = $sce.trustAsResourceUrl('https://embed.spotify.com/?uri=' + scope.song.uri);\r\n            }\r\n        };\r\n    }\r\n\r\n})();","/**\r\n * Created by Colin.Watson on 4/13/2015.\r\n */\r\n(function(){\r\n\r\n    angular.module('app').controller('homeController', homeController);\r\n\r\n    homeController.$inject = ['spotify'];\r\n    function homeController(spotify){\r\n        var vm = this;\r\n        vm.user = spotify.user;\r\n        vm.playlists = [];\r\n        vm.logout = spotify.logout;\r\n\r\n        spotify.getPlaylists().then(function(data){\r\n           vm.playlists = data;\r\n        });\r\n\r\n    }\r\n\r\n})();","/**\r\n * Created by Colin.Watson on 4/13/2015.\r\n */\r\n(function(){\r\n\r\n\tangular.module('app').controller('loginController', loginController);\r\n\r\n    loginController.$inject = ['$location', 'spotify'];\r\n\tfunction loginController($location, spotify){\r\n\t\tvar vm = this;\r\n\t\tvm.login = login;\r\n\r\n\t\tif ($location.absUrl().indexOf('/access_token') > -1){\r\n\t\t\twindow.location = $location.absUrl().replace('access_token', '?access_token');;\r\n\t\t}\r\n\r\n\t\tif ($location.search().access_token){\r\n\t\t\tspotify.setToken($location.search().access_token);\r\n\t\t\tspotify.login().then(function(){\r\n                $location.url('/home');\r\n            });\r\n\t\t}\r\n\r\n\t\tfunction login() {\r\n            window.location = 'https://accounts.spotify.com/en/authorize?client_id=cf218c95b88e409fbdd30b815632bd14&response_type=token&redirect_uri=http://localhost:7203/#/&scope=user-read-private%20playlist-read-private';\r\n        }\r\n\t}\r\n\r\n})();","/**\r\n * Created by Colin.Watson on 4/13/2015.\r\n */\r\n(function(){\r\n\tangular.module('app').controller('playlistController', playlistController);\r\n\r\n\tplaylistController.$inject = ['spotify', 'youtube', '$routeParams'];\r\n\tfunction playlistController(spotify, youtube, $routeParams){\r\n\t\tvar vm = this;\r\n\t\tvm.title = 'playlist';\r\n        var playlistId = $routeParams.playlistId;\r\n        var ownerId = $routeParams.ownerId;\r\n\r\n\t\tspotify.getPlaylist(ownerId, playlistId).then(function(data){\r\n\t\t\t\tvm.playlist = data;\r\n\r\n\t\t\t\tangular.forEach(vm.playlist.tracks.items, function(item){\r\n\t\t\t\t\tyoutube.getVideo(item.track.name).then(function(youtube){\r\n\t\t\t\t\t\titem.video = youtube;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\t}\r\n\r\n})();","/**\r\n * Created by Colin.Watson on 4/13/2015.\r\n */\r\n\r\n\r\n(function () {\r\n\r\n\tangular.module('app').factory('spotify', spotify);\r\n\r\n\tspotify.$inject = ['$http', '$window', '$location'];\r\n\tfunction spotify($http, $window, $location) {\r\n\t\tvar service = {\r\n\t\t\tgetPlaylists: getPlaylists,\r\n\t\t\tgetPlaylist: getPlaylist,\r\n\t\t\tgetSong:getSong,\r\n\t\t\tlogin:login,\r\n            logout:logout,\r\n            setToken:setToken,\r\n\t\t\tuser:{}\r\n\t\t};\r\n\r\n        if ($window.localStorage.getItem('spotify')){\r\n            service.user = JSON.parse($window.localStorage.getItem('spotify'));\r\n        }\r\n\r\n\t\treturn service;\r\n\r\n        function login(){\r\n            return $http.get('https://api.spotify.com/v1/me').then(function (response) {\r\n                service.user.id = response.data.id;\r\n                service.user.name = response.data.display_name;\r\n                $window.localStorage.setItem('spotify', JSON.stringify(service.user));\r\n\r\n            });\r\n        }\r\n\r\n        function logout(){\r\n                $window.localStorage.removeItem('authToken');\r\n                $window.localStorage.removeItem('spotify');\r\n                service.user = {};\r\n                $location.path('');\r\n        }\r\n\r\n        function setToken(token){\r\n            $window.localStorage.setItem('authToken', token);\r\n        }\r\n\r\n        function getSong(name) {\r\n            return $http.get('spotify' + name).then(function (response) {\r\n                return response.data;\r\n            });\r\n\t\t}\r\n\r\n\t\tfunction getPlaylists() {\r\n            return $http.get('https://api.spotify.com/v1/users/' + service.user.id + '/playlists').then(function (response) {\r\n                return response.data.items;\r\n            });\r\n\t\t}\r\n\r\n\t\tfunction getPlaylist(ownerId, playlistId) {\r\n            return $http.get('https://api.spotify.com/v1/users/' + ownerId + '/playlists/' + playlistId).then(function (response) {\r\n                return response.data;\r\n            });\r\n\t\t}\r\n\t}\r\n})();\r\n","/**\r\n * Created by Colin.Watson on 4/13/2015.\r\n */\r\n\r\n(function(){\r\n\r\n\tangular.module('app').factory('youtube', youtube);\r\n\r\n\tyoutube.$inject = ['$http'];\r\n\tfunction youtube($http){\r\n\r\n\t\tvar service = {\r\n\t\t\tgetVideo:getVideo\r\n\t\t};\r\n\r\n\t\treturn service;\r\n\r\n\r\n\t\tfunction getVideo(name){\r\n\t\t\treturn $http.get('https://content.googleapis.com/youtube/v3/search?safeSearch=strict&part=snippet&q=' + name + '&key=AIzaSyAjfOZ77iVJbiIhcegRuFDNkug-sNA3izo').then(function(response){\r\n\t\t\t\tvar video = {};\r\n\t\t\t\tangular.forEach(response.data.items, function(item){\r\n\t\t\t\t\tif (item.snippet.channelTitle.toLowerCase().indexOf('vevo') > 0){\r\n\t\t\t\t\t\tvideo.id = item.id.videoId;\r\n\t\t\t\t\t\tvideo.title = item.snippet.title;\r\n\t\t\t\t\t\tvideo.thumbnail = item.snippet.thumbnails.default.url;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn video;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n})();","angular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/home/home.html\",\"<h4><div ng-click=vm.logout()><i class=\\\"fa fa-sign-out\\\"></i> Logout</div></h4><h4>Welcome {{vm.user.name}}</h4><div class=container><div class=row><div ng-repeat=\\\"playlist in vm.playlists\\\" class=\\\"playlist col-xs-4\\\" cw-fade=\\\"\\\"><a href=/#/playlist/{{playlist.owner.id}}/{{playlist.id}}><img ng-src={{playlist.images[0].url}}><div class=playlist-name>{{playlist.name}}</div></a></div></div></div>\");\n$templateCache.put(\"app/login/login.html\",\"<div class=container><div class=row><div class=\\\"col-xs-4 col-xs-push-4 login text-center\\\" ng-click=vm.login()><h4>Login with Spotify</h4><i class=\\\"fa fa-4x fa-spotify\\\"></i></div></div></div>\");\n$templateCache.put(\"app/music/music.html\",\"<!DOCTYPE html><html><head lang=en><meta charset=UTF-8><title></title></head><body></body></html>\");\n$templateCache.put(\"app/playlist/playlist.html\",\"<h4><a href=/#/home><i class=\\\"fa fa-chevron-left\\\"></i> Back</a></h4><h4>{{vm.playlist.name}}</h4><div class=container><div class=row><div ng-repeat=\\\"item in vm.playlist.tracks.items\\\" class=\\\"song col-xs-4\\\" cw-fade=\\\"\\\"><span class=artist>{{item.track.artists[0].name}}</span> <span class=track>{{item.track.name}}</span> <img ng-src={{item.track.album.images[0].url}}> <a href={{item.track.album.external_urls.spotify}} target=_blank><i class=\\\"fa fa-spotify\\\"></i> Listen on Spotify</a> <a ng-show=item.video.id href=\\\"{{\\'https://www.youtube.com/watch?v=\\' + item.video.id}}\\\" target=_blank><i class=\\\"fa fa-youtube-play\\\"></i> Watch on youtube</a></div></div></div>\");\n$templateCache.put(\"app/directives/templates/spotifyPlay.html\",\"<iframe ng-src={{url}} width=100% height=100 frameborder=0 allowtransparency=true></iframe>\");}]);"],"sourceRoot":"/source/"}